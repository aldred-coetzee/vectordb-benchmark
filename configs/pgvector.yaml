# PostgreSQL with pgvector Configuration
database:
  name: pgvector
  version: "pg16"
  endpoint: localhost:5432

container:
  image: pgvector/pgvector:pg16
  cpus: 16
  memory: 64g
  ports:
    - "5432:5432"
  env:
    POSTGRES_PASSWORD: "postgres"
    POSTGRES_USER: "postgres"
    POSTGRES_DB: "postgres"
  volumes:
    - pgvector_data:/var/lib/postgresql/data

# Health check configuration
health_check:
  command: "docker exec ${CONTAINER} pg_isready -U postgres"
  timeout: 60
  interval: 2

# Metadata for reports
metadata:
  full_name: "PostgreSQL pgvector"
  architecture: client-server
  protocol: PostgreSQL wire protocol
  persistence: disk
  license: PostgreSQL License
  url: https://github.com/pgvector/pgvector
  notes: "SQL-based (PostgreSQL wire protocol). Flat index = full table scan. HNSW index build is extremely slow at scale (~9 hrs for 10M vectors). Excluded from SIFT-10M by default."

# pgvector-specific parameters
params:
  database: postgres
  user: postgres
  password: postgres
  min_connections: 1
  max_connections: 10
