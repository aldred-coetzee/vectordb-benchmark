# KDB.AI Configuration
database:
  name: kdbai
  version: "1.8.2"
  endpoint: http://localhost:8082

container:
  image: portal.dl.kx.com/kdbai-db
  cpus: 16
  memory: 64g
  ports:
    - "8082:8082"
    - "8081:8081"
  env:
    KDB_LICENSE_B64: "${KDB_LICENSE_B64}"
    NUM_WRK: "2"
    THREADS: "8"
    VDB_DIR: "/tmp/kx/data/vdb"
  volumes:
    - ./data/kdbai:/tmp/kx/data
  setup:
    directories:
      - path: ./data/kdbai
        mode: "0777"

# Health check configuration
health_check:
  url: http://localhost:8081/api/v2/ready
  timeout: 60
  interval: 2

# Metadata for reports
metadata:
  full_name: "KDB.AI"
  architecture: client-server
  protocol: QIPC
  persistence: disk
  license: Commercial
  url: https://kdb.ai
  notes: "qIPC protocol. Uses qFlat/qHnsw with mmapLevel=0 (fully in-memory). DBpedia-OpenAI excluded (OOM at 1536D within 64GB). qHnsw supports multi-threaded insert via THREADS env var (NUM_WRK=2, THREADS=8). Requires commercial license. Pass numpy arrays (not .tolist()) for 82x faster insert/search. Batch search via table.search(vectors={idx: [v1, v2, ...]}). THREADS parallelism for search only applies to partitioned tables â€” for single-table benchmarks, batch search does not parallelize server-side."

# KDB.AI specific parameters
params:
  timeout: 30
